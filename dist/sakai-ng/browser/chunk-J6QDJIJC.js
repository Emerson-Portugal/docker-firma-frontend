import{b as p}from"./chunk-JT6TYXBW.js";import{a as h}from"./chunk-XLKPKAOX.js";import{D as c,z as m}from"./chunk-ITE25VCI.js";import{L as u,Q as a,n as s}from"./chunk-TKL4FGBT.js";var g=class n{apiUrl=`${p.BASE_URL}/rrhh/rrhh/documentos`;http=a(c);tokenService=a(h);getAuthHeaders(){let e=this.tokenService.getToken();return new m({Authorization:`Bearer ${e}`,Accept:"application/json"})}getDocumentos(e,t){let b=this.getAuthHeaders(),o={};return e&&(o.anio=e.toString(),t&&(o.mes=t.toString())),this.http.get(this.apiUrl,{headers:b,params:o}).pipe(s(i=>i&&Array.isArray(i.documentos)?i.documentos.map(r=>({id:r.id.toString(),nombre:r.nombre_archivo||r.nombre,fecha_creacion:r.subido_en||r.fecha_creacion,estado:r.estado,ruta_archivo:r.ruta_archivo||r.ruta,nombre_usuario:r.nombre_usuario||(r.usuario?r.usuario.nombre:""),usuario_dni:r.usuario_dni||(r.usuario?r.usuario.dni:""),subido_en:r.subido_en,firmado_en:r.firmado_en,url_descarga:r.url_descarga})):(console.warn("La respuesta de la API no contiene un array de documentos:",i),[])))}getDocumentoPorId(e){let t=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/${e}`,{headers:t})}eliminarDocumento(e){let t=this.getAuthHeaders();return this.http.delete(`${this.apiUrl}/${e}`,{headers:t,responseType:"json"})}getDocumentPeriods(){let e=this.getAuthHeaders();return this.http.get(`${this.apiUrl}/periodos`,{headers:e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{g as a};
