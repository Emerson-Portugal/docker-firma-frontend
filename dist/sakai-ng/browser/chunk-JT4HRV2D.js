import{d as R,f as F,g as L,h as T,n as h}from"./chunk-FPNHGTLK.js";import{a as B}from"./chunk-XLKPKAOX.js";import{l as I,s as N}from"./chunk-ITE25VCI.js";import{Ab as d,Bb as g,Ea as M,Fa as _,Ga as a,Pb as n,Q as S,Qb as f,Ta as u,V as w,W as y,Za as p,hb as k,mb as c,nb as t,ob as i,pb as s,qb as H,rb as D,sb as U,u as C,wb as E}from"./chunk-TKL4FGBT.js";import"./chunk-EQDQRRRY.js";var x=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-footer-signature"]],decls:3,vars:0,consts:[[1,"flex","items-center","justify-center","py-4","gap-2","border-t","border-solid","border-gray-200","bg-white"],["routerLink","/",1,"inline-flex","items-center"],["src","assets/img/logo.png","alt","logo",1,"h-14","w-auto"]],template:function(e,o){e&1&&(H(0,"div",0)(1,"a",1),U(2,"img",2),D()())},encapsulation:2})};function j(r,l){r&1&&(t(0,"div",16)(1,"a",17),s(2,"i",18),t(3,"span",19),n(4,"Subir Boleta"),i(),t(5,"span",20),n(6,"Subir"),i()(),t(7,"a",21),s(8,"i",22),t(9,"span",19),n(10,"Listado de Boletas"),i(),t(11,"span",20),n(12,"Listado"),i()()())}function P(r,l){r&1&&(t(0,"div",29)(1,"a",35),s(2,"i",36),n(3," Subir Boleta "),i(),t(4,"a",37),s(5,"i",38),n(6," Listado de Boletas "),i()())}function O(r,l){if(r&1){let e=E();t(0,"div",23)(1,"div",24)(2,"div",25),n(3,"Sesi\xF3n"),i(),t(4,"div",26),n(5),i(),t(6,"div",27),n(7," DNI: "),t(8,"span",28),n(9),i()()(),t(10,"div",29)(11,"a",30),s(12,"i",31),n(13," Perfil "),i()(),p(14,P,7,0,"div",32),t(15,"div",29)(16,"button",33),d("click",function(){w(e);let m=g();return y(m.logout())}),s(17,"i",34),n(18," Cerrar sesi\xF3n "),i()()()}if(r&2){let e=g();a(5),f(e.userName||"Usuario"),a(4),f(e.userDni||"\u2014"),a(5),c("ngIf",e.isHRView)}}function W(r,l){if(r&1){let e=E();t(0,"div",39)(1,"div",40)(2,"div",41),n(3,"Sesi\xF3n"),i(),t(4,"div",42),n(5),i(),t(6,"div",27),n(7," DNI: "),t(8,"span",28),n(9),i()()(),t(10,"div",43)(11,"button",44),d("click",function(){w(e);let m=g();return y(m.logout())}),s(12,"i",34),n(13," Cerrar sesi\xF3n "),i()()()}if(r&2){let e=g();a(5),f(e.userName||"Usuario"),a(4),f(e.userDni||"\u2014")}}var v=class r{showEllipsisMenu=!1;showUserMenu=!1;isHRView=!1;userName=null;userDni=null;router=S(L);tokenSrv=S(B);constructor(){this.refreshRoleAndUser(),this.router.events.pipe(C(l=>l instanceof R)).subscribe(()=>this.refreshRoleAndUser())}refreshRoleAndUser(){this.isHRView=this.tokenSrv.hasRole?this.tokenSrv.hasRole("rrhh"):!1,this.userName=this.tokenSrv.getFullName?this.tokenSrv.getFullName():null,this.userDni=this.tokenSrv.getDni?this.tokenSrv.getDni():null}toggleEllipsisMenu(){this.showEllipsisMenu=!this.showEllipsisMenu,this.showEllipsisMenu&&(this.showUserMenu=!1)}toggleUserMenu(){this.showUserMenu=!this.showUserMenu,this.showUserMenu&&(this.showEllipsisMenu=!1)}logout(){this.tokenSrv.clearAll(),this.showEllipsisMenu=!1,this.showUserMenu=!1,this.router.navigateByUrl("/auth/login")}onDocClick(l){let e=l.target,o=e.closest(".menu-ellipsis-container"),m=e.closest(".menu-user-container");o||(this.showEllipsisMenu=!1),m||(this.showUserMenu=!1)}onStorage(){this.refreshRoleAndUser()}onEsc(){this.showEllipsisMenu=!1,this.showUserMenu=!1}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-header-signature"]],hostBindings:function(e,o){e&1&&d("click",function(b){return o.onDocClick(b)},_)("storage",function(b){return o.onStorage(b)},M)("keydown.escape",function(){return o.onEsc()},_)},decls:17,vars:5,consts:[[1,"sticky","top-0","inset-x-0","z-[997]","bg-white/90","backdrop-blur","border-b","border-gray-200"],[1,"h-14","md:h-16","px-3","sm:px-4","lg:px-6","flex","items-center","gap-3"],["routerLink","/signature/home",1,"inline-flex","items-center","shrink-0","min-w-0"],["src","assets/img/logo.png","alt","logo",1,"h-8","md:h-15","w-auto"],[1,"flex-1"],[1,"flex","items-center","gap-1","md:gap-3"],["class","hidden md:flex items-center gap-2 me-2",4,"ngIf"],[1,"relative","md:hidden","menu-ellipsis-container"],["type","button","aria-haspopup","menu","aria-controls","mobile-topbar-menu",1,"inline-flex","justify-center","items-center","rounded-full","w-10","h-10","text-red-600","hover:bg-gray-100","focus:outline-none","focus-visible:ring-2","focus-visible:ring-red-500",3,"click"],[1,"pi","pi-ellipsis-v","text-xl"],[1,"sr-only"],["id","mobile-topbar-menu","class","absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-lg ring-1 ring-black/5 py-2 z-50 divide-y divide-gray-100",4,"ngIf"],[1,"relative","hidden","md:block","menu-user-container"],["type","button","aria-haspopup","menu","aria-controls","desktop-user-menu","aria-label","User",1,"inline-flex","justify-center","items-center","rounded-full","w-10","h-10","md:w-12","md:h-12","lg:w-14","lg:h-14","text-red-600","hover:bg-red-50","focus:outline-none","focus-visible:ring-2","focus-visible:ring-red-500",3,"click"],[1,"pi","pi-user","text-2xl","md:text-3xl","lg:text-4xl"],["id","desktop-user-menu","class","absolute right-0 top-full mt-2 w-72 bg-white rounded-xl shadow-lg ring-1 ring-black/5 py-3 z-50",4,"ngIf"],[1,"hidden","md:flex","items-center","gap-2","me-2"],["routerLink","/signature/upload-ballots/dashboard",1,"inline-flex","items-center","gap-2","px-3","py-2","text-sm","font-medium","text-red-600","hover:bg-red-50","rounded-lg","transition-colors"],[1,"pi","pi-upload"],[1,"hidden","lg:inline"],[1,"lg:hidden"],["routerLink","/signature/document-list",1,"inline-flex","items-center","gap-2","px-3","py-2","text-sm","font-medium","text-red-600","hover:bg-red-50","rounded-lg","transition-colors"],[1,"pi","pi-list"],["id","mobile-topbar-menu",1,"absolute","right-0","top-full","mt-2","w-56","bg-white","rounded-xl","shadow-lg","ring-1","ring-black/5","py-2","z-50","divide-y","divide-gray-100"],[1,"px-4","pb-3"],[1,"text-xs","text-gray-500"],[1,"mt-0.5","font-medium","text-gray-900","truncate"],[1,"text-xs","text-gray-500","mt-0.5"],[1,"font-mono"],[1,"py-1"],["routerLink","/profile",1,"flex","items-center","gap-2","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],[1,"pi","pi-user","text-base"],["class","py-1",4,"ngIf"],["type","button",1,"w-full","flex","items-center","gap-2","px-4","py-2","text-sm","text-red-600","hover:bg-red-50","text-left",3,"click"],[1,"pi","pi-sign-out","text-base"],["routerLink","/signature/upload-ballots/dashboard",1,"flex","items-center","gap-2","px-4","py-2","text-sm","text-red-600","hover:bg-red-50"],[1,"pi","pi-upload","text-base"],["routerLink","/signature/document-list",1,"flex","items-center","gap-2","px-4","py-2","text-sm","text-red-600","hover:bg-red-50"],[1,"pi","pi-list","text-base"],["id","desktop-user-menu",1,"absolute","right-0","top-full","mt-2","w-72","bg-white","rounded-xl","shadow-lg","ring-1","ring-black/5","py-3","z-50"],[1,"px-4","pb-3","border-b","border-gray-100"],[1,"text-sm","text-gray-500"],[1,"mt-1","font-medium","text-gray-900","truncate"],[1,"pt-2"],["type","button",1,"w-full","flex","items-center","gap-2","px-4","py-2","text-sm","text-red-600","hover:bg-red-50",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"a",2),s(3,"img",3),i(),s(4,"div",4),t(5,"div",5),p(6,j,13,0,"div",6),t(7,"div",7)(8,"button",8),d("click",function(){return o.toggleEllipsisMenu()}),s(9,"i",9),t(10,"span",10),n(11,"Abrir men\xFA"),i()(),p(12,O,19,3,"div",11),i(),t(13,"div",12)(14,"button",13),d("click",function(){return o.toggleUserMenu()}),s(15,"i",14),i(),p(16,W,14,2,"div",15),i()()()()),e&2&&(a(6),c("ngIf",o.isHRView),a(2),k("aria-expanded",o.showEllipsisMenu),a(4),c("ngIf",o.showEllipsisMenu),a(2),k("aria-expanded",o.showUserMenu),a(2),c("ngIf",o.showUserMenu))},dependencies:[h,T,N,I],encapsulation:2})};var z=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-signature"]],decls:5,vars:0,consts:[[1,"flex","flex-col","min-h-screen"],[1,"flex-grow"]],template:function(e,o){e&1&&(t(0,"div",0),s(1,"app-header-signature"),t(2,"main",1),s(3,"router-outlet"),i(),s(4,"app-footer-signature"),i())},dependencies:[F,v,h,x],encapsulation:2})};export{z as SignatureComponent};
